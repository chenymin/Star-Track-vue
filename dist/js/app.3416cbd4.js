webpackJsonp([1],{"+VGo":function(t,e){},0:function(t,e,n){t.exports=n("x35b")},u38m:function(t,e){},x35b:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o=n("/5sW"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ion-app",[n("router-view")],1)},i=[],c=n("XyMi");function s(t){n("+VGo")}var a=null,l=!1,u=s,p=null,f=null,h=Object(c["a"])(a,r,i,l,u,p,f),d=h.exports,y=n("/ocq"),g=n("EOM2"),_=n("MEr+"),b=n("D2Nv"),m=n("sAZ4"),v=n("dI0l"),k=n("D77r"),O=n("hQYy"),w=n("b8PX"),j=n("rCTf");function P(t){return j["Observable"].create(function(e){fetch("https://itunes.apple.com/search?term="+encodeURIComponent(t)+"&media=music").then(function(t){return t.json()}).then(function(t){e.next(t),e.complete()}).catch(function(t){return e.error(t)})}).pipe(Object(O["retryWhen"])(function(t){return t.pipe(Object(w["delay"])(500))}),Object(k["timeout"])(5e3))}function C(t){return j["Observable"].create(function(e){fetch("https://itunes.apple.com/lookup?id="+t).then(function(t){return t.json()}).then(function(t){e.next(t),e.complete()}).catch(function(t){return e.error(t)})}).pipe(Object(O["retryWhen"])(function(t){return t.pipe(Object(w["delay"])(500))}),Object(k["timeout"])(5e3))}var S=n("EEr4"),x=n("k9Ku"),M=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),I=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},R=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},E=function(t){function e(){var e=t.call(this)||this;return e.progress=0,e.isPlaying=!1,e.isFavorite=!1,e.isSeeking=!1,e.player=null,e}return M(e,t),e.prototype.trackDidChange=function(){},e.prototype.setProgress=function(){if(!this.isSeeking){var t=this.player.seek();this.progress=t/this.player.duration()*100||0,requestAnimationFrame(this.setProgress.bind(this))}},e.prototype.playerEnded=function(){this.isPlaying=!1},e.prototype.fullImage=function(){if(this.track)return this.track.artworkUrl100.replace(/100x100bb/,"400x400bb")},e.prototype.toggleSong=function(){this.isPlaying?this.stopSong():this.playSong()},e.prototype.playSong=function(){this.player.play(),this.isPlaying=!0},e.prototype.stopSong=function(){this.isPlaying=!1,this.player.stop(),window.cancelAnimationFrame(this.animationQ)},e.prototype.seek=function(t){this.isSeeking=!1;var e=this.player.duration();this.player.seek(e*(t/100)),requestAnimationFrame(this.setProgress.bind(this))},e.prototype.handleDrag=function(){this.isSeeking=!0},e.prototype.mounted=function(){this.player=new x["Howl"]({src:[this.track.previewUrl],onplay:this.setProgress.bind(this),onend:this.playerEnded.bind(this)})},I([Object(g["Prop"])(),R("design:type",Object)],e.prototype,"track",void 0),I([Object(g["Watch"])("track"),R("design:type",Function),R("design:paramtypes",[]),R("design:returntype",void 0)],e.prototype,"trackDidChange",null),e=I([g["Component"],R("design:paramtypes",[])],e),e}(g["Vue"]),D=E,A=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("ion-card",[n("ion-grid",{attrs:{"no-padding":""}},[n("ion-row",{attrs:{"align-items-center":""}},[n("ion-col",{attrs:{"col-12":"","col-md-5":""}},[n("div",{staticClass:"track-img",class:{"":!t.isPlaying,playing:t.isPlaying,"is-seeking":t.isSeeking}},[n("img",{attrs:{src:t.fullImage(),alt:""}})])]),n("ion-col",[n("ion-card-content",[n("ion-card-title",[n("h2",[t._v(t._s(t.track.trackName))])]),n("h3",[t._v("by "+t._s(t.track.artistName))]),n("em",[t._v(t._s(t.track.collectionName))]),n("ion-grid",[n("ion-row",[n("ion-col",{attrs:{"col-3":""}},[n("ion-fab-button",{attrs:{mini:"",color:"light"},on:{click:function(e){t.toggleSong()}}},[n("ion-icon",{attrs:{color:"success",name:t.isPlaying?"square":"play"}})],1)],1),n("ion-col",{attrs:{"col-9":""}},[n("ion-range",{attrs:{value:t.progress,max:"100",color:"success"},on:{ionFocus:function(e){t.handleDrag()},ionBlur:function(e){t.seek(e.target.value)}}})],1)],1)],1)],1),n("ion-item",[n("p",[t._v("Track Duration")]),n("ion-badge",{attrs:{slot:"end",color:"light"},slot:"end"},[t._v("\n            "+t._s(t._f("msToMins")(t.track.trackTimeMillis))+"\n          ")])],1)],1)],1)],1)],1)},T=[];function N(t){n("u38m")}var $=!1,F=N,U=null,q=null,B=Object(c["a"])(D,A,T,$,F,U,q),V=B.exports,W=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),G=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},Q=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.searchInput="",e.isError=!1,e.showSpinner=!1,e.track=null,e.showCard=!1,e.listing=[],e}return W(e,t),e.prototype.setSearch=function(t){this.searchInput=t,this.onInput$.next(t)},e.prototype.searchCleared=function(t){this.searchInput="",this.listing=[]},e.prototype.goToDetail=function(t){this.showCard=!0,this.track=t},e.prototype.mounted=function(){var t=this;this.onInput$=new S["Subject"],this.onInput$.pipe(Object(v["filter"])(function(e){if(e)return t.showSpinner=!0,t.isError=!1,console.log(t.showSpinner),e;t.listing=[],t.showSpinner=!1}),Object(_["debounceTime"])(500),Object(m["switchMap"])(function(t){return P(t)}),Object(b["tap"])(function(){t.showSpinner=!1})).subscribe(function(e){return t.listing=e.results},function(e){t.showSpinner=!1,t.isError=!0,console.log(e)})},e.prototype.clear=function(){this.track=null,this.showCard=!1},e=G([Object(g["Component"])({components:{MusicCard:V}})],e),e}(g["Vue"]),X=Q,z=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ion-page"},[n("ion-header",[n("ion-toolbar",{attrs:{color:"success"}},[n("ion-title",[t._v("Search")])],1),n("ion-toolbar",{attrs:{color:"success"}},[n("ion-searchbar",{attrs:{placeholder:"",showCancelButton:"true",debounce:"0",value:t.searchInput},on:{ionInput:function(e){t.searchInput=e.target.value,t.onInput$.next(e.target.value)},ionClear:function(e){t.searchCleared(e)}}})],1)],1),n("ion-content",[n("ion-grid",{attrs:{fixed:"","no-padding":""}},[t.searchInput?t._e():n("div",{attrs:{padding:""}},[n("h1",[t._v("Trending Bands")]),t._l(["Pink Floyd","August Burns Red","Alkaline Trio"],function(e){return n("ion-item",{key:e,on:{click:function(n){t.setSearch(e)}}},[t._v("\n          "+t._s(e)+"\n        ")])})],2),t.isError?n("div",{attrs:{"text-center":"",padding:""}},[n("ion-icon",{attrs:{color:"secondary",name:"warning",big:""}}),n("h1",[t._v("Uh-oh...")]),n("h2",[t._v("It's not me, it's you!")]),n("h2",[t._v("It appears there is a connection problem")])],1):t._e(),t.showSpinner?n("div",{attrs:{padding:"","text-center":"",color:"dark"}},[n("ion-spinner")],1):t._e(),t.showCard?t._e():n("ion-list",t._l(t.listing,function(e){return n("ion-item",{key:e.id,on:{click:function(n){t.goToDetail(e)}}},[n("ion-thumbnail",{attrs:{slot:"start"},slot:"start"},[n("img",{attrs:{src:e.artworkUrl100,alt:""}})]),n("ion-label",[n("h2",[t._v(t._s(e.trackName))]),n("h3",[t._v(t._s(e.artistName))]),n("p",[t._v(t._s(e.collectionName))])]),n("ion-note",{attrs:{slot:"end"},slot:"end"},[t._v("\n              "+t._s(t._f("msToMins")(e.trackTimeMillis))+"\n            ")])],1)})),t.showCard?n("div",[n("Music-Card",{attrs:{track:t.track}}),n("ion-button",{attrs:{size:"block",color:"success"},on:{click:function(e){t.clear()}}},[n("ion-icon",{attrs:{slot:"icon-only",name:"close"},slot:"icon-only"})],1)],1):t._e()],1)],1)],1)},H=[],J=!1,K=null,Y=null,Z=null,L=Object(c["a"])(X,z,H,J,K,Y,Z),tt=L.exports,et=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function o(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(o.prototype=n.prototype,new o)}}(),nt=this&&this.__decorate||function(t,e,n,o){var r,i=arguments.length,c=i<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"===typeof Reflect&&"function"===typeof Reflect.decorate)c=Reflect.decorate(t,e,n,o);else for(var s=t.length-1;s>=0;s--)(r=t[s])&&(c=(i<3?r(c):i>3?r(e,n,c):r(e,n))||c);return i>3&&c&&Object.defineProperty(e,n,c),c},ot=this&&this.__metadata||function(t,e){if("object"===typeof Reflect&&"function"===typeof Reflect.metadata)return Reflect.metadata(t,e)},rt=function(t){function e(){var e=t.call(this)||this;return e.trackName=null,e}return et(e,t),e.prototype.beforeMount=function(){var t=this,e=this.$route.params.id,n=C(e).subscribe(function(e){t.$data.track=e.results[0],n.unsubscribe()})},e=nt([Object(g["Component"])({data:function(){return{track:void 0}},components:{MusicCard:V}}),ot("design:paramtypes",[])],e),e}(g["Vue"]),it=rt,ct=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"ion-page"},[n("ion-header",[n("ion-toolbar",{attrs:{color:"success"}},[n("ion-back-button"),n("ion-title",[t._v(t._s(t.track.trackName))])],1)],1),n("ion-content",[n("Music-Card",{attrs:{track:t.track}})],1)],1)},st=[],at=!1,lt=null,ut=null,pt=null,ft=Object(c["a"])(it,ct,st,at,lt,ut,pt),ht=ft.exports;o["default"].use(y["a"]);var dt=new y["a"]({routes:[{path:"/",name:"search",component:tt},{path:"/track-detail/:id",name:"trackDetail",component:ht}]});function yt(t){return _t(t)}function gt(t){return t<=99&&(t=("0"+t).slice(-2)),t}function _t(t){var e=t/1e3,n=gt(Math.floor(e%60));e/=60;var o=gt(Math.floor(e%60));e/=60;var r=Math.floor(e%24),i=r?gt(r)+":":"";return i+o+":"+n}var bt=n("ydGU");Object(bt["a"])("/service-worker.js",{ready:function(){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(){console.log("Content has been cached for offline use.")},updated:function(){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(t){console.error("Error during service worker registration:",t)}}),o["default"].config.ignoredElements=[/ion-\w*/],o["default"].filter("msToMins",function(t){return yt(t)}),new o["default"]({router:dt,render:function(t){return t(d)}}).$mount("#app")}},[0]);
//# sourceMappingURL=app.3416cbd4.js.map